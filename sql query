-- Online SQL Editor to Run SQL Online.
-- Use the editor to create new tables, insert data and all other SQL operations.
  
-- create table customer_management_system(customer_id number,customer_name varchar(100),gender varchar(1),age int, location varchar(100));

-- drop table customer_management_system;

-- drop table customer_management;

-- create table ashokit_customers(customer_id number,  customer_name varchar(50),gender varchar(15),age number,location varchar(50));
-- insert into ashokit_customers(customer_id,customer_name,gender,age,location) values(01,'Mahesh','Male',35,"Hyderabad"); 
-- insert into ashokit_customers(customer_id,customer_name,gender,age,location) values(02,'Ashok','Male',35,"Hyderabad");
-- insert into ashokit_customers values(03,'Rajesh','Male',40,'Mumbai');
-- insert into ashokit_customers values(&customerId,&customername,&gender,&age,&location);
-- select * from ashokit_customers;
-- set linesize 300;
--   update Ashokit_customers set location = 'Delhi';        
-- update Ashokit_customers  set location = 'Hydrabad' where customer_name = 'Ashok';
-- update ashokit_customers set location='Pune' where customer_id = 1;
-- update Ashokit_customers set location = 'Pune' where customer_name = 'Rajesh';
-- update Ashokit_customers set location ='Bihar', age=40 where customer_name = 'Rajesh'; 
-- update Ashokit_customers set customer_name = 'Pankaj' , age =29 where gender = 'Male' and location= 'Pune';
-- update Ashokit_customers set customer_name = 'Niraj' , age =29 where gender = 'Male' and location= 'Pune';
-- delete from Ashokit_customers;
-- delete from Ashokit_customers where customer_name = 'Mahesh';
-- delete from Ashokit_customers where customer_id = 2;
-- insert into Ashokit_customers(customer_id,customer_name,gender,age,location) values(4,'Dhiraj','Male', 49,'Delhi');
-- delete from Ashokit_customers where customer_name = 'Dhiraj' and age>=40; 
-- create table ashokit_employees(empId number(5),empName varchar2(50),gender char(1),dob date,created_dt timestamp);
-- drop table Ashokit_employees;
desc Ashokit_customers;

SELECT * FROM pankajdb.ashokit_users;
alter table ashokit_users add (gender char(1),city_name varchar(50));
alter table ashokit_users add city_name varchar(50);
alter table ashokit_users drop city_name;
alter table ashokit_users rename column city_name to state;

-- SELECT * FROM pankajdb.ashokit_employees;
insert into ashokit_employees values (101,'Pankaj','M','04-01-2024',now());

INSERT INTO ashokit_employees (empId, empName, gender, dob, created_dt) 
VALUES (101, 'Pankaj', 'M', '2024-01-04', NOW());
INSERT INTO ashokit_employees (empId, empName, gender, dob, created_dt) 
VALUES (102, 'Dhiraj', 'M', '2024-02-05', NOW());
INSERT INTO ashokit_employees (empId, empName, gender, dob, created_dt) 
VALUES (103, 'Niraj', 'M', '2021-01-06', NOW());
INSERT INTO ashokit_employees (empId, empName, gender, dob, created_dt) 

VALUES (104, 'Raj', 'M', '2021-01-07', NOW());
INSERT INTO ashokit_employees (empId, empName, gender, dob, created_dt) 
VALUES (105, 'Rahul', 'M', '2021-01-09', NOW());
INSERT INTO ashokit_employees (empId, empName, gender, dob, created_dt) 
VALUES (106, 'Denesh', 'M', '2021-01-07', NOW());

select * from ashokit_employees;
desc ashokit_employees;
create table ashokit_users(username varchar(50),user_password varchar(100));
SELECT * FROM pankajdb.clients;
insert into clients values(01,'Mahesh','Kumar');
insert into clients values(null,'Mahesh','Kumar');
insert into clients values(02,'Ashok','Kumar');
insert into clients values(01,'Sarath','Kumar');
ALTER TABLE clients MODIFY first_name VARCHAR(255) NOT NULL;
insert into clients values(01,null,'Kumar');
create table client_fake(id int not null, companies varchar(225));
select * from client_fake;
insert into client_fake values(null, 'infotech');
alter table client_fake modify id int null;
alter table client_fake modify id int not null;
truncate table client_fake;
alter table client_fake add column salary int(5.2);
create table alam(rollno int unique not null,lacation varchar(200) default 'Delhi');
select * from alam;
insert into alam(rollno) value(102);
alter table alam modify lacation varchar(200) default null;
create table student(rollno int unique,sname varchar(100),sfee int, email varchar(200) unique);
SELECT * FROM student;
insert into student values(101,'Alam',5000,'aks@gmail.com');
insert into student(rollno,sfee,email) values(102,4500,'nks@gmail.com');
create table student_address( hno int ,svill varchar(100), nearby varchar(100),pincode int, constraint unique_house_no unique (hno));
select * from student_address;
insert into student_address values(121,'chkbhairo','lado',110030);
create table student_marks(id int,math int, science int, commerace int, english int, unique(id));
select * from student_marks;
create table pankaj_table(id int , salary int, location varchar(100));
select * from pankaj_table;
alter table pankaj_table add constraint unique(id);
CREATE TABLE clients (
    client_id int unique,
    first_name VARCHAR(50) ,
    last_name VARCHAR(50)
);
use pankajdb;
SELECT * FROM pankajdb.ashokit_employees;
insert into ashokit_employees value(109,'M','2009-04-05',now());
INSERT INTO ashokit_employees (empId, empName, gender, dob, created_dt) 
VALUES ('M', '2024-01-04', NOW());

SELECT * from ashokit_employees where empName is null;
SELECT * from ashokit_employees where empName is not null;

select empName as "Employee Name", dob as "Date Of Birth" from ashokit_employees where empName is not null;
select * from ashokit_employees;
select * from ashokit_employees ae;
select ae.* from ashokit_employees ae;
select ae.empId from ashokit_employees ae;
alter table ashokit_employees add column salary varchar(100);
insert into ashokit_employees(salary) value (100);
update ashokit_employees set salary ='200'where empId=101;
UPDATE ashokit_employees SET salary = '200' WHERE empId = 101;
select empId,empName,salary,salary*12 "Annual Salary" from ashokit_employees;
create table student(rollno int unique,sname varchar(100),sfee int, email varchar(200) unique);
select * from ashokit_employees;
desc ashokit_employees;
create table ashokit_users(username varchar(50),user_password varchar(100));
desc table ashokit_employees;
select * from recylebin;
select * from tab;
-- drop user root cascade;
select * from all_users;
-- create user pankaj identified by singh;
-- alter user pankaj identified by kumar;
grant resources,connect to pankaj;
revoke resources from pankaj;
-- show user;
select * from all_users;
-- select * from dba_users:
alter user pankaj account lock;
alter user pankaj account unlock;
-- drop user pankaj cascade;
select * from tab;
commit
-- rollback
savepoint insertsavepoint;
savepoint updatesavepoint;
select * from ashokit_employees order by empId asc;
select * from ashokit_employees order by empName desc;

CREATE TABLE employees (
    emp_no      INT             NOT NULL,  -- UNSIGNED AUTO_INCREMENT??
    birth_date  DATE            NOT NULL,
    first_name  VARCHAR(14)     NOT NULL,
    last_name   VARCHAR(16)     NOT NULL,
    gender      ENUM ('M','F')  NOT NULL,  -- Enumeration of either 'M' or 'F'  
    hire_date   DATE            NOT NULL,
    PRIMARY KEY (emp_no)                   -- Index built automatically on primary-key column
                                           -- INDEX (first_name)
                                           -- INDEX (last_name)
);
CREATE TABLE departments (
    dept_no     CHAR(4)         NOT NULL,  -- in the form of 'dxxx'
    dept_name   VARCHAR(40)     NOT NULL,
    PRIMARY KEY (dept_no),                 -- Index built automatically
    UNIQUE  KEY (dept_name)                -- Build INDEX on this unique-value column
);
CREATE TABLE dept_emp (
    emp_no      INT         NOT NULL,
    dept_no     CHAR(4)     NOT NULL,
    from_date   DATE        NOT NULL,
    to_date     DATE        NOT NULL,
    KEY         (emp_no),   -- Build INDEX on this non-unique-value column
    KEY         (dept_no),  -- Build INDEX on this non-unique-value column
    FOREIGN KEY (emp_no) REFERENCES employees (emp_no) ON DELETE CASCADE,
           -- Cascade DELETE from parent table 'employee' to this child table
           -- If an emp_no is deleted from parent 'employee', all records
           --  involving this emp_no in this child table are also deleted
           -- ON UPDATE CASCADE??
    FOREIGN KEY (dept_no) REFERENCES departments (dept_no) ON DELETE CASCADE,
           -- ON UPDATE CASCADE??
    PRIMARY KEY (emp_no, dept_no)
           -- Might not be unique?? Need to include from_date
);
CREATE TABLE dept_manager (
   dept_no      CHAR(4)  NOT NULL,
   emp_no       INT      NOT NULL,
   from_date    DATE     NOT NULL,
   to_date      DATE     NOT NULL,
   KEY         (emp_no),
   KEY         (dept_no),
   FOREIGN KEY (emp_no)  REFERENCES employees (emp_no)    ON DELETE CASCADE,
                                  -- ON UPDATE CASCADE??
   FOREIGN KEY (dept_no) REFERENCES departments (dept_no) ON DELETE CASCADE,
   PRIMARY KEY (emp_no, dept_no)  -- might not be unique?? Need from_date
);
CREATE TABLE titles (
    emp_no      INT          NOT NULL,
    title       VARCHAR(50)  NOT NULL,
    from_date   DATE         NOT NULL,
    to_date     DATE,
    KEY         (emp_no),
    FOREIGN KEY (emp_no) REFERENCES employees (emp_no) ON DELETE CASCADE,
                         -- ON UPDATE CASCADE??
    PRIMARY KEY (emp_no, title, from_date)
       -- This ensures unique combination. 
       -- An employee may hold the same title but at different period
);
CREATE TABLE salaries (
    emp_no      INT    NOT NULL,
    salary      INT    NOT NULL,
    from_date   DATE   NOT NULL,
    to_date     DATE   NOT NULL,
    KEY         (emp_no),
    FOREIGN KEY (emp_no) REFERENCES employees (emp_no) ON DELETE CASCADE,
    PRIMARY KEY (emp_no, from_date)
);

CREATE TABLE salaries (
    emp_no      INT    NOT NULL,
    salary      INT    NOT NULL,
    from_date   DATE   NOT NULL,
    to_date     DATE   NOT NULL,
    KEY         (emp_no),
    FOREIGN KEY (emp_no) REFERENCES employees (emp_no) ON DELETE CASCADE,
    PRIMARY KEY (emp_no, from_date)
);
drop table student_marks;
create table ashokit_student(
        student_id int primary key,
        student_name varchar(225) not null,
        courses varchar(225) check(courses in('Core Java','Advance Java','Java Full Stack')),
        courses_fee int check (courses_fee between 5000 and 10000),
        contact_no varchar(10) not null unique,
        created_dt timestamp default now() );
 
 insert into ashokit_student values(01,'Mahesh','Core Java',5000,'2112112121',now());
 insert into ashokit_student values(02,'Suresh','Advance Java',6000,'12323232',now());
 insert into ashokit_student values(03,'Nagesh','Java Full Stack',7000,'343434343',now());
 alter table ashokit_student rename ashokit_students;
 select * from ashokit_students ; 
select * from user_constraints where table_name='ASHOKIT_STUDENTS';   
alter table ashokit_students drop primary key;
alter table ashokit_students add primary key(student_id);
create table ashokit_products_info(pid varchar(10) primary key,
                                   pname varchar(30) not null,
                                   pcost int,
                                   pmfg_dt date not null,
                                   pwarranty varchar(50) not null,
                                   company_code varchar(10),                                   
                                   constraint ashokit_comp_code_fk foreign key(company_code) 
                                   references ashokit_companies_info(company_code)
                                  );
select * from ashokit_products_info;
drop table student_address;
drop table salaries,titles;
drop table alam,ashokit_employees,ashokit_student,ashokit_students,client_fake,clients,departments,dept_emp,dept_manager,emp,employees,pankaj_table,student;
drop table dept_details;

create table ashokit_student(student_id int primary key, student_name varchar(100) not null, course varchar(100) check(course in ('java','ms','advance','java')),contact varchar(10) not null, created_dt timestamp default now());
select * from ashokit_student;
insert into ashokit_student(student_id,student_name,course,contact) values(1,'pankaj','java','1234567890');
truncate ashokit_student;
create table ashokit_product_info(pid int primary key,
                                 pname varchar(100) not null,
                                  pocst int  not null,
                                  pmfg_dt date not null,
                                  pwarenty varchar(100) not null,
                                  company_code varchar(10));
 select * from ashokit_product_info;
 insert into ashokit_product_info values(1022,'pankaj',1007,'2021-07-07','2yr','cmp1');
 select pid,pname,pocst,((pocst*20)/100) as discount_price from ashokit_product_info;
  select pid,pname,pocst,(pocst-(pocst*20)/100) as discount_price from ashokit_product_info;
 select * from ashokit_product_info where pocst>100;
 alter table ashokit_product_info rename column pocst to pcost;
